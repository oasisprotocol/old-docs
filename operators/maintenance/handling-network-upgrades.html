<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Handling Network Upgrades | Oasis Dev Docs</title>
    <meta name="description" content="Oasis Developer Documentation">
    <meta name="generator" content="VuePress 1.4.0">
    <link rel="icon" href="/favicon.ico">
  <script async="async" src="https://www.googletagmanager.com/gtag/js?id=UA-116576458-1"></script>
  <script>window.dataLayer = window.dataLayer || [];
       function gtag(){dataLayer.push(arguments);}
       gtag('js', new Date());
       gtag('config', 'UA-116576458-1');</script>
  <script>var APP_ID = "scny7003";

       window.intercomSettings = {
         app_id: APP_ID
       };

       function intercom(){var w=window;var ic=w.Intercom;if(typeof ic==="function"){ic('reattach_activator');ic('update',w.intercomSettings);}else{var d=document;var i=function(){i.c(arguments);};i.q=[];i.c=function(args){i.q.push(args);};w.Intercom=i;var l=function(){var s=d.createElement('script');s.type='text/javascript';s.async=true;s.src='https://widget.intercom.io/widget/' + APP_ID;var x=d.getElementsByTagName('script')[0];x.parentNode.insertBefore(s,x);};if(w.attachEvent){w.attachEvent('onload',l);}else{w.addEventListener('load',l,false);}}};
       intercom();
      </script>
    
    <link rel="preload" href="/assets/css/0.styles.dc63d5c5.css" as="style"><link rel="preload" href="/assets/js/app.78492d26.js" as="script"><link rel="preload" href="/assets/js/2.075975fa.js" as="script"><link rel="preload" href="/assets/js/28.294d7aef.js" as="script"><link rel="prefetch" href="/assets/js/10.93571276.js"><link rel="prefetch" href="/assets/js/11.500a2e76.js"><link rel="prefetch" href="/assets/js/12.f0031691.js"><link rel="prefetch" href="/assets/js/13.a3e5ed99.js"><link rel="prefetch" href="/assets/js/14.1d789f7e.js"><link rel="prefetch" href="/assets/js/15.36e8fa25.js"><link rel="prefetch" href="/assets/js/16.831dda25.js"><link rel="prefetch" href="/assets/js/17.8bfbd6bc.js"><link rel="prefetch" href="/assets/js/18.f102d401.js"><link rel="prefetch" href="/assets/js/19.87626d0f.js"><link rel="prefetch" href="/assets/js/20.77109cca.js"><link rel="prefetch" href="/assets/js/21.22ec69d4.js"><link rel="prefetch" href="/assets/js/22.f6043d20.js"><link rel="prefetch" href="/assets/js/23.187fdae8.js"><link rel="prefetch" href="/assets/js/24.5c1266e7.js"><link rel="prefetch" href="/assets/js/25.1248b439.js"><link rel="prefetch" href="/assets/js/26.a9f02d3c.js"><link rel="prefetch" href="/assets/js/27.cd5bd5dd.js"><link rel="prefetch" href="/assets/js/29.eeaf9846.js"><link rel="prefetch" href="/assets/js/3.1339dba0.js"><link rel="prefetch" href="/assets/js/30.11d8dfad.js"><link rel="prefetch" href="/assets/js/31.cc737b5e.js"><link rel="prefetch" href="/assets/js/32.b4c26cae.js"><link rel="prefetch" href="/assets/js/33.624acd1b.js"><link rel="prefetch" href="/assets/js/34.3c01cdea.js"><link rel="prefetch" href="/assets/js/35.b237e756.js"><link rel="prefetch" href="/assets/js/36.6c16eb3b.js"><link rel="prefetch" href="/assets/js/37.b57b96fc.js"><link rel="prefetch" href="/assets/js/38.41fb0dd6.js"><link rel="prefetch" href="/assets/js/39.141c3210.js"><link rel="prefetch" href="/assets/js/4.5cab9c99.js"><link rel="prefetch" href="/assets/js/40.bae7e32d.js"><link rel="prefetch" href="/assets/js/41.b478d657.js"><link rel="prefetch" href="/assets/js/42.abdce7a1.js"><link rel="prefetch" href="/assets/js/43.436c8868.js"><link rel="prefetch" href="/assets/js/5.cec86eb7.js"><link rel="prefetch" href="/assets/js/6.91d44027.js"><link rel="prefetch" href="/assets/js/7.80f3afd5.js"><link rel="prefetch" href="/assets/js/8.62a70793.js"><link rel="prefetch" href="/assets/js/9.7f9fb173.js">
    <link rel="stylesheet" href="/assets/css/0.styles.dc63d5c5.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo.svg" alt="Oasis Dev Docs" class="logo"> <span class="site-name can-hide">Oasis Dev Docs</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://oasislabs.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Home
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://join.slack.com/t/oasiscommunity/shared_invite/enQtNjQ5MTA3NTgyOTkzLWIxNTg1ZWZmOTIwNmQ2MTg1YmU0MzgyMzk3OWM2ZWQ4NTQ0ZDJkNTBmMTdlM2JhODllYjg5YmJkODc2NzgwNTg" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Support
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/oasislabs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://oasislabs.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Home
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://join.slack.com/t/oasiscommunity/shared_invite/enQtNjQ5MTA3NTgyOTkzLWIxNTg1ZWZmOTIwNmQ2MTg1YmU0MzgyMzk3OWM2ZWQ4NTQ0ZDJkNTBmMTdlM2JhODllYjg5YmJkODc2NzgwNTg" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Support
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/oasislabs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/overview.html" class="sidebar-link">Overview</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>App Developer Docs</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Operator Docs</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/operators/overview.html" class="sidebar-link">Node Operator Overview</a></li><li><a href="/operators/prerequisites.html" class="sidebar-link">Prerequisites Guide</a></li><li><a href="/operators/joining-the-testnet.html" class="sidebar-link">Joining the Testnet</a></li><li><a href="/operators/creating-an-entity-package.html" class="sidebar-link">Creating an Entity Package</a></li><li><a href="/operators/current-testnet-parameters.html" class="sidebar-link">Current Testnet Parameters</a></li><li><a href="/operators/sentry-node.html" class="sidebar-link">Sentry Node Architecture</a></li><li><a href="/operators/architecture-overview.html" class="sidebar-link">Architecture Overview</a></li><li><a href="/operators/hardware-recommendations.html" class="sidebar-link">Node Hardware Recommendations</a></li><li><a href="/operators/troubleshooting.html" class="sidebar-link">Troubleshooting Guide</a></li><li><a href="/operators/stake-management.html" class="sidebar-link">Stake Management</a></li><li><a href="/operators/incentives-proposal.html" class="sidebar-link">Network Incentives Proposal</a></li><li><a href="/operators/community-resources.html" class="sidebar-link">Community-Made Resources</a></li><li><a href="/operators/the-quest-rules.html" class="sidebar-link">The Quest Rules</a></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>Maintenance Guides</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/operators/maintenance/wiping-node-state.html" class="sidebar-link">Wiping Node State</a></li><li><a href="/operators/maintenance/checking-account-nonce.html" class="sidebar-link">Checking your Account's nonce</a></li><li><a href="/operators/maintenance/handling-network-upgrades.html" class="active sidebar-link">Handling Network Upgrades</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/operators/maintenance/handling-network-upgrades.html#dumping-blockchain-state" class="sidebar-link">Dumping Blockchain State</a></li><li class="sidebar-sub-header"><a href="/operators/maintenance/handling-network-upgrades.html#patching-dumped-state" class="sidebar-link">Patching Dumped State</a></li><li class="sidebar-sub-header"><a href="/operators/maintenance/handling-network-upgrades.html#downloading-and-verifying-the-provided-genesis-document" class="sidebar-link">Downloading and Verifying the Provided Genesis Document</a></li><li class="sidebar-sub-header"><a href="/operators/maintenance/handling-network-upgrades.html#stopping-your-node" class="sidebar-link">Stopping Your Node</a></li><li class="sidebar-sub-header"><a href="/operators/maintenance/handling-network-upgrades.html#wiping-state" class="sidebar-link">Wiping State</a></li><li class="sidebar-sub-header"><a href="/operators/maintenance/handling-network-upgrades.html#updating-configuration" class="sidebar-link">Updating Configuration</a></li><li class="sidebar-sub-header"><a href="/operators/maintenance/handling-network-upgrades.html#upgrading-oasis-core" class="sidebar-link">Upgrading Oasis Core</a></li><li class="sidebar-sub-header"><a href="/operators/maintenance/handling-network-upgrades.html#starting-the-node" class="sidebar-link">Starting the Node</a></li><li class="sidebar-sub-header"><a href="/operators/maintenance/handling-network-upgrades.html#cleaning-up" class="sidebar-link">Cleaning Up</a></li></ul></li><li><a href="/operators/maintenance/adding-removing-nodes.html" class="sidebar-link">Adding or Removing Nodes</a></li></ul></section></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>API Reference</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>HSM Support</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="handling-network-upgrades"><a href="#handling-network-upgrades" class="header-anchor">#</a> Handling Network Upgrades</h1> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>Following this guide when there is no network upgrade will result in you
losing your place on the current network.</p></div> <p>The following guide should be used when the network has agreed to do a software
upgrade.</p> <p>To see the latest upgrade schedule, see <a href="/operators/current-testnet-parameters.html#deployment-change-log">Deployment Change Log</a>.</p> <h2 id="dumping-blockchain-state"><a href="#dumping-blockchain-state" class="header-anchor">#</a> Dumping Blockchain State</h2> <div class="custom-block tip"><p class="custom-block-title">NOTE</p> <p>Do not stop your <code>oasis-node</code> process just yet.</p></div> <p>Before an upgrade we will update the <a href="/operators/current-testnet-parameters.html#upgrade-parameters">Upgrade Parameters</a> to specify the block
height at which to dump.</p> <p>To dump the state of the network to a genesis file, run:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token assign-left variable">HEIGHT_TO_DUMP</span><span class="token operator">=</span><span class="token operator">&lt;</span>HEIGHT-TO-DUMP<span class="token operator">&gt;</span>
oasis-node genesis dump <span class="token punctuation">\</span>
  -a unix:/serverdir/node/internal.sock <span class="token punctuation">\</span>
  --genesis.file /serverdir/etc/genesis_dump.<span class="token variable">$HEIGHT_TO_DUMP</span>.json <span class="token punctuation">\</span>
  --height <span class="token variable">$HEIGHT_TO_DUMP</span>
</code></pre></div><p>replacing <code>&lt;HEIGHT-TO-DUMP&gt;</code> with the block height we specified.</p> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>You must only run the following command <em>after</em> the <code>&lt;HEIGHT-TO-DUMP&gt;</code> block
height has been reached on the network.</p></div> <h2 id="patching-dumped-state"><a href="#patching-dumped-state" class="header-anchor">#</a> Patching Dumped State</h2> <div class="custom-block tip"><p class="custom-block-title">NOTE</p> <p>At the moment, we don't provide state patches.</p> <p>Once <a href="https://github.com/oasislabs/oasis-core/issues/2757" target="_blank" rel="noopener noreferrer">Oasis Core #2757<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> is implemented, it will become easier to create/apply
a state patch with the standard Unix tools.</p></div> <h2 id="downloading-and-verifying-the-provided-genesis-document"><a href="#downloading-and-verifying-the-provided-genesis-document" class="header-anchor">#</a> Downloading and Verifying the Provided Genesis Document</h2> <p>Download the genesis document linked in the <a href="/operators/current-testnet-parameters.html#deployment-change-log">Deployment Change Log</a> and save it
as <code>/serverdir/etc/genesis.json</code>.</p> <p>Pretty-print the dumped state (set indent to 2) so you will be able to easily
compare it to the provided genesis document.</p> <div class="custom-block tip"><p class="custom-block-title">NOTE</p> <p>We plan to update the <code>oasis-node genesis dump</code> command to output the state dump
in a <em>canonical</em> form that is <code>diff</code>/<code>patch</code> friendly.</p> <p>For more details, see <a href="https://github.com/oasislabs/oasis-core/issues/2757" target="_blank" rel="noopener noreferrer">Oasis Core #2757<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p></div> <p>One way to do that is to use <a href="https://docs.python.org/3/library/json.html#module-json" target="_blank" rel="noopener noreferrer">Python's <code>json</code> module<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">cat</span> genesis_dump.<span class="token variable">$HEIGHT_TO_DUMP</span>.json <span class="token operator">|</span> <span class="token punctuation">\</span>
  python3 -c <span class="token string">'import sys, json; print(json.dumps(json.load(sys.stdin), indent=2))'</span> <span class="token punctuation">\</span>
  <span class="token operator">&gt;</span> genesis_dump.<span class="token variable">$HEIGHT_TO_DUMP</span>.pretty.json
</code></pre></div><div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>Be aware that <a href="http://stedolan.github.io/jq/" target="_blank" rel="noopener noreferrer">jq<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, the popular JSON CLI tool, <a href="https://github.com/stedolan/jq/wiki/FAQ#caveats" target="_blank" rel="noopener noreferrer">converts all numbers to IEEE 754
64-bit values<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> which can result in silent loss of precision and/or
other changes.</p> <p>Hence, we recommend avoiding its usage until this issue is resolved.</p></div> <p>Then compare the pretty-printed dumped state with the provided genesis document:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">diff</span> genesis_dump.<span class="token variable">$HEIGHT_TO_DUMP</span>.pretty.json genesis.json
</code></pre></div><h3 id="example-diff-for-the-2020-03-05-network-upgrade"><a href="#example-diff-for-the-2020-03-05-network-upgrade" class="header-anchor">#</a> Example diff for the 2020-03-05 network upgrade</h3> <p>For the 2020-03-05 network upgrade, the <code>diff</code> command above returns:</p> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token coord">3,4c3,4</span>
<span class="token deleted-arrow deleted">&lt;   &quot;genesis_time&quot;: &quot;2020-03-05T14:16:02.002875089+01:00&quot;,
&lt;   &quot;chain_id&quot;: &quot;quest-2020-02-11-1581440400&quot;,
</span><span class="token coord">---</span>
<span class="token inserted-arrow inserted">&gt;   &quot;genesis_time&quot;: &quot;2020-03-05T17:00:00.000000000Z&quot;,
&gt;   &quot;chain_id&quot;: &quot;questnet-2020-03-05-1583427600&quot;,
</span><span class="token coord">1942c1942,1945</span>
<span class="token deleted-arrow deleted">&lt;         &quot;3&quot;: &quot;100000000000&quot;
</span><span class="token coord">---</span>
<span class="token inserted-arrow inserted">&gt;         &quot;3&quot;: &quot;100000000000&quot;,
&gt;         &quot;4&quot;: &quot;100000000000&quot;,
&gt;         &quot;5&quot;: &quot;100000000000&quot;,
&gt;         &quot;6&quot;: &quot;100000000000&quot;
</span><span class="token coord">1953c1956,1961</span>
<span class="token deleted-arrow deleted">&lt;       &quot;commission_schedule_rules&quot;: {},
</span><span class="token coord">---</span>
<span class="token inserted-arrow inserted">&gt;       &quot;commission_schedule_rules&quot;: {
&gt;         &quot;rate_change_interval&quot;: 1,
&gt;         &quot;rate_bound_lead&quot;: 14,
&gt;         &quot;max_rate_steps&quot;: 21,
&gt;         &quot;max_bound_steps&quot;: 21
&gt;       },
</span><span class="token coord">1967,1973d1974</span>
<span class="token deleted-arrow deleted">&lt;       &quot;disable_transfers&quot;: true,
&lt;       &quot;disable_delegation&quot;: true,
&lt;       &quot;undisable_transfers_from&quot;: {
&lt;         &quot;OSo8hvkfyqypYniWWlVhikiVYQJC7EBsUdczBdpAjIs=&quot;: true,
&lt;         &quot;ZWVxEX66b1wnY62wx5lp7bR9rF8+2tCxgmcwFs7Kg1s=&quot;: true
&lt;       },
&lt;       &quot;fee_weight_vote&quot;: 1,
</span><span class="token coord">1975c1976,1978</span>
<span class="token deleted-arrow deleted">&lt;       &quot;reward_factor_block_proposed&quot;: &quot;0&quot;
</span><span class="token coord">---</span>
<span class="token inserted-arrow inserted">&gt;       &quot;reward_factor_block_proposed&quot;: &quot;0&quot;,
&gt;       &quot;fee_split_vote&quot;: &quot;1&quot;,
&gt;       &quot;fee_split_propose&quot;: &quot;1&quot;
</span><span class="token coord">7647c7650</span>
<span class="token deleted-arrow deleted">&lt;   &quot;halt_epoch&quot;: 4839,
</span><span class="token coord">---</span>
<span class="token inserted-arrow inserted">&gt;   &quot;halt_epoch&quot;: 6525,
</span><span class="token coord">7649c7652</span>
</code></pre></div><p>We can see that the provided genesis document updated some network parameters
but didn't touch any other entity, account or delegation data.</p> <p>If you obtain the same result, then you have successfully verified the provided
genesis document.</p> <p>Let's break down the diff and explain what has changed.</p> <p>The following genesis document fields will always change on a network upgrade:</p> <ul><li><code>chain_id</code>: A unique ID of the network.</li> <li><code>genesis_time</code>: Time from which the genesis document is valid.</li> <li><code>halt_epoch</code>: The epoch when the node will stop functioning. We set
this to intentionally force an upgrade.</li></ul> <p>The following fields were a particular change in this upgrade:</p> <ul><li><code>staking.params.thresholds</code>: Three new staking threshold values were added for
three new staking threshold kinds (<code>4</code>: key manager node, <code>5</code>: compute
runtime, <code>6</code>: key manager runtime).</li> <li><code>staking.params.commission_schedule_rules</code>: Commission schedule rules were
added since this upgrade enables token transfers and delegation.</li> <li><code>staking.params.disable_transfers</code>, <code>staking.params.disable_delegation</code>,
<code>staking.params.undisable_transfers_from</code>: These fields were removed since
this upgrade enables token transfers and delegation.</li> <li><code>staking.params.fee_split_vote</code>, <code>staking.params.fee_split_propose</code>:
These two fields were added to control how a block's fee for a validator is
split split between the validator that signs the block (<code>fee_split_vote</code>) and
the validator that proposes the block (<code>fee_split_propose</code>).</li></ul> <h2 id="stopping-your-node"><a href="#stopping-your-node" class="header-anchor">#</a> Stopping Your Node</h2> <p>This will depend on your process manager. You should stop your <code>oasis-node</code>
process however this is done for your setup.</p> <h2 id="wiping-state"><a href="#wiping-state" class="header-anchor">#</a> Wiping State</h2> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>We do not suggest that you wipe <em>all</em> state. You might lose node identities and
keys if you do it this way.</p></div> <p>Before restarting your node you should wipe tendermint state. The process for
this is described in the <a href="/operators/maintenance/wiping-node-state.html#state-wipe-and-keep-node-identity">Wiping Node State</a> document.</p> <h2 id="updating-configuration"><a href="#updating-configuration" class="header-anchor">#</a> Updating Configuration</h2> <p>If the <a href="/operators/current-testnet-parameters.html#deployment-change-log">Deployment Change Log</a> provides instructions for updating your node's
configuration, update the <code>/serverdir/etc/config.yml</code> file accordingly.</p> <h2 id="upgrading-oasis-core"><a href="#upgrading-oasis-core" class="header-anchor">#</a> Upgrading Oasis Core</h2> <p>Before starting your node again, make sure you upgrade your <code>oasis-node</code> binary
to the current version specified in the <a href="/operators/current-testnet-parameters.html">Current Testnet Parameters</a>.</p> <h2 id="starting-the-node"><a href="#starting-the-node" class="header-anchor">#</a> Starting the Node</h2> <p>This will depend on your process manager. If you don't have a process manager,
you should use one. However, to start the node without a process manager you can
start the <code>oasis-node</code> like so:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>oasis-node --config /serverdir/etc/config.yml
</code></pre></div><h2 id="cleaning-up"><a href="#cleaning-up" class="header-anchor">#</a> Cleaning Up</h2> <p>After you're comfortable with your node deployment, you can clean up the
<code>genesis_dump.$HEIGHT_TO_DUMP.json</code> and
<code>genesis_dump.$HEIGHT_TO_DUMP.pretty.json</code> files.</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/oasislabs/docs/edit/master/src/operators/maintenance/handling-network-upgrades.md" target="_blank" rel="noopener noreferrer">Help us improve this page!</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/operators/maintenance/checking-account-nonce.html" class="prev">
        Checking your Account's nonce
      </a></span> <span class="next"><a href="/operators/maintenance/adding-removing-nodes.html">
        Adding or Removing Nodes
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.78492d26.js" defer></script><script src="/assets/js/2.075975fa.js" defer></script><script src="/assets/js/28.294d7aef.js" defer></script>
  </body>
</html>
