<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Stake Management | Oasis Dev Docs</title>
    <meta name="generator" content="VuePress 1.5.2">
    <link rel="icon" href="/favicon.ico">
    <script async="async" src="https://www.googletagmanager.com/gtag/js?id=UA-116576458-1"></script>
    <script>window.dataLayer = window.dataLayer || [];
       function gtag(){dataLayer.push(arguments);}
       gtag('js', new Date());
       gtag('config', 'UA-116576458-1');</script>
    <meta name="description" content="Oasis Developer Documentation">
    <link rel="preload" href="/assets/css/0.styles.697aaac3.css" as="style"><link rel="preload" href="/assets/js/app.4a6e40e5.js" as="script"><link rel="preload" href="/assets/js/2.5ac98bd6.js" as="script"><link rel="preload" href="/assets/js/35.c0f9d01c.js" as="script"><link rel="prefetch" href="/assets/js/10.29d03c65.js"><link rel="prefetch" href="/assets/js/11.2d8ba7df.js"><link rel="prefetch" href="/assets/js/12.703e753b.js"><link rel="prefetch" href="/assets/js/13.34adc5ce.js"><link rel="prefetch" href="/assets/js/14.fdc7f302.js"><link rel="prefetch" href="/assets/js/15.f8e15984.js"><link rel="prefetch" href="/assets/js/16.a407388e.js"><link rel="prefetch" href="/assets/js/17.a3605a48.js"><link rel="prefetch" href="/assets/js/18.b5898371.js"><link rel="prefetch" href="/assets/js/19.89355eaf.js"><link rel="prefetch" href="/assets/js/20.7fcac19a.js"><link rel="prefetch" href="/assets/js/21.ea985376.js"><link rel="prefetch" href="/assets/js/22.44ab5ca8.js"><link rel="prefetch" href="/assets/js/23.48460421.js"><link rel="prefetch" href="/assets/js/24.cd6ddafa.js"><link rel="prefetch" href="/assets/js/25.6ca2b406.js"><link rel="prefetch" href="/assets/js/26.8820793b.js"><link rel="prefetch" href="/assets/js/27.2511efe5.js"><link rel="prefetch" href="/assets/js/28.c0a56ea3.js"><link rel="prefetch" href="/assets/js/29.f1ee8d6e.js"><link rel="prefetch" href="/assets/js/3.65431f35.js"><link rel="prefetch" href="/assets/js/30.28e89ea7.js"><link rel="prefetch" href="/assets/js/31.198e290d.js"><link rel="prefetch" href="/assets/js/32.51f19708.js"><link rel="prefetch" href="/assets/js/33.ba27f8df.js"><link rel="prefetch" href="/assets/js/34.3333f064.js"><link rel="prefetch" href="/assets/js/36.a466d52c.js"><link rel="prefetch" href="/assets/js/37.157d4bd0.js"><link rel="prefetch" href="/assets/js/38.c9bb8211.js"><link rel="prefetch" href="/assets/js/39.0f82cd35.js"><link rel="prefetch" href="/assets/js/4.75853e69.js"><link rel="prefetch" href="/assets/js/40.a6817848.js"><link rel="prefetch" href="/assets/js/41.4e8fbd4b.js"><link rel="prefetch" href="/assets/js/42.345934c3.js"><link rel="prefetch" href="/assets/js/43.c003d857.js"><link rel="prefetch" href="/assets/js/44.2ce68197.js"><link rel="prefetch" href="/assets/js/5.f41d40d7.js"><link rel="prefetch" href="/assets/js/6.3b6fdee1.js"><link rel="prefetch" href="/assets/js/7.5486ecc1.js"><link rel="prefetch" href="/assets/js/8.f3f32d03.js"><link rel="prefetch" href="/assets/js/9.983e730f.js">
    <link rel="stylesheet" href="/assets/css/0.styles.697aaac3.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo.svg" alt="Oasis Dev Docs" class="logo"> <span class="site-name can-hide">Oasis Dev Docs</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://oasisprotocol.org" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Home
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://join.slack.com/t/oasiscommunity/shared_invite/enQtNjQ5MTA3NTgyOTkzLWIxNTg1ZWZmOTIwNmQ2MTg1YmU0MzgyMzk3OWM2ZWQ4NTQ0ZDJkNTBmMTdlM2JhODllYjg5YmJkODc2NzgwNTg" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Support
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/oasisprotocol" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://oasisprotocol.org" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Home
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://join.slack.com/t/oasiscommunity/shared_invite/enQtNjQ5MTA3NTgyOTkzLWIxNTg1ZWZmOTIwNmQ2MTg1YmU0MzgyMzk3OWM2ZWQ4NTQ0ZDJkNTBmMTdlM2JhODllYjg5YmJkODc2NzgwNTg" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Support
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/oasisprotocol" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/overview.html" class="sidebar-link">Overview</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Operator Docs</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/operators/overview.html" class="sidebar-link">Node Operator Overview</a></li><li><a href="/operators/architecture-overview.html" class="sidebar-link">Network Architecture Overview</a></li><li><a href="/operators/prerequisites.html" class="sidebar-link">Prerequisites Guide</a></li><li><a href="/operators/amber-network.html" class="sidebar-link">Amber Network</a></li><li><a href="/operators/hardware-recommendations.html" class="sidebar-link">Node Hardware Recommendations</a></li><li><a href="/operators/running-node-on-amber-network.html" class="sidebar-link">Running a Node on the Amber Network</a></li><li><a href="/operators/creating-an-entity-package.html" class="sidebar-link">Creating an Entity Package</a></li><li><a href="/operators/migrating-questnet-entities.html" class="sidebar-link">Migrating Your QuestNet Entity for the Amber Network</a></li><li><a href="/operators/current-testnet-parameters.html" class="sidebar-link">Current Testnet Parameters</a></li><li><a href="/operators/stake-management.html" aria-current="page" class="active sidebar-link">Stake Management</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/operators/stake-management.html#prerequisites" class="sidebar-link">Prerequisites</a></li><li class="sidebar-sub-header"><a href="/operators/stake-management.html#common-token-info" class="sidebar-link">Common token info</a></li><li class="sidebar-sub-header"><a href="/operators/stake-management.html#account-info" class="sidebar-link">Account info</a></li><li class="sidebar-sub-header"><a href="/operators/stake-management.html#generating-and-submitting-transactions" class="sidebar-link">Generating and submitting transactions</a></li><li class="sidebar-sub-header"><a href="/operators/stake-management.html#example-transactions" class="sidebar-link">Example transactions</a></li></ul></li><li><a href="/operators/sentry-node.html" class="sidebar-link">Sentry Node Architecture</a></li><li><a href="/operators/incentives-proposal.html" class="sidebar-link">Network Incentives Proposal</a></li><li><a href="/operators/the-quest-rules.html" class="sidebar-link">The Quest Rules</a></li><li><a href="/operators/community-resources.html" class="sidebar-link">Community-Made Resources</a></li><li><a href="/operators/troubleshooting.html" class="sidebar-link">Troubleshooting Guide</a></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Maintenance Guides</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Wallet Support</span> <span class="arrow right"></span></p> <!----></section></li><li><a href="https://github.com/oasisprotocol/oasis-core/blob/master/docs/index.md" target="_blank" rel="noopener noreferrer" class="sidebar-link">Oasis Core Developer Docs<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>App Developer Docs</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="stake-management"><a href="#stake-management" class="header-anchor">#</a> Stake Management</h1> <p>For node operators, the <code>oasis-node</code> binary offers a command line interface for
various staking token operations.</p> <p>The following commands are intended to be run <strong>online</strong> (i.e. on the <code>server</code>):</p> <ul><li><code>oasis-node stake info</code> shows the token information,</li> <li><code>oasis-node stake list</code> lists all accounts with positive balance,</li> <li><code>oasis-node stake account info</code> shows detailed account information,</li> <li><code>oasis-node consensus submit_tx</code> submits a pre-generated transaction given a
filename.</li></ul> <p>In addition, the following commands generate transactions and are meant to be
run offline (i.e. on the <code>localhost</code>), because signing transactions requires a
private key which <strong>should not be accessible</strong> from outside in any way:</p> <ul><li><code>oasis-node stake account gen_transfer</code></li> <li><code>oasis-node stake account gen_burn</code></li> <li><code>oasis-node stake account gen_escrow</code></li> <li><code>oasis-node stake account gen_reclaim_escrow</code></li></ul> <h2 id="prerequisites"><a href="#prerequisites" class="header-anchor">#</a> Prerequisites</h2> <p>We will assume you are familiar with the previous sections of the
<a href="/operators/overview.html">Operator Docs</a> and have the <code>oasis-node</code> binary installed.</p> <p>To run a command that requires a connection to the online Oasis node (i.e. the
<code>server</code>), you need to either:</p> <ul><li>change the working directory to where the internal Oasis node unix socket is
located (e.g. <code>/serverdir/node/</code>) before executing the command, or</li> <li>pass the <code>-a $ADDR</code> flag where <code>ADDR</code> represents the path to the internal
Oasis node unix socket prefixed with <code>unix:</code> (e.g.
<code>unix:/serverdir/node/internal.sock</code>).</li></ul> <p>We will pipe the output of commands that return JSON through <a href="https://docs.python.org/3/library/json.html#module-json.tool" target="_blank" rel="noopener noreferrer">Python's
<code>json.tool</code> module<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> to pretty-print it.</p> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>Be aware that <a href="http://stedolan.github.io/jq/" target="_blank" rel="noopener noreferrer">jq<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, the popular JSON CLI tool, <a href="https://github.com/stedolan/jq/wiki/FAQ#caveats" target="_blank" rel="noopener noreferrer">converts all numbers to IEEE 754
64-bit values<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> which can result in silent loss of precision and/or
other changes.</p> <p>Hence, we recommend avoiding its usage until this issue is resolved.</p></div> <h2 id="common-token-info"><a href="#common-token-info" class="header-anchor">#</a> Common token info</h2> <p>To query an Oasis node for the common token info, run:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>oasis-node stake info -a <span class="token variable">$ADDR</span>
</code></pre></div><p>This will output something like:</p> <div class="language-text extra-class"><pre class="language-text"><code>Total supply: 10000000000000000000
Common pool: 7999214452933172880
Staking threshold (entity): 100000000000
Staking threshold (validator node): 100000000000
Staking threshold (compute node): 100000000000
Staking threshold (storage node): 100000000000
Staking threshold (key manager node): 100000000000
Staking threshold (compute runtime): 100000000000
Staking threshold (key manager runtime): 100000000000
</code></pre></div><p>The numbers are listed in base units, 1 token corresponds to 10^9 (i.e. one
billion) base units.</p> <p>We can observe that the total supply is 10 billion tokens and that almost 8
billion tokens are in the <em>common pool</em>.</p> <p>Finally, the staking thresholds for all node kinds (entity, validator, compute,
storage) and runtime kinds (compute, key manager) are 100 tokens.</p> <h2 id="account-info"><a href="#account-info" class="header-anchor">#</a> Account info</h2> <p>To list all accounts with positive balance, run:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>oasis-node stake list -a <span class="token variable">$ADDR</span>
</code></pre></div><p>This will list all accounts' IDs, e.g.:</p> <div class="language-text extra-class"><pre class="language-text"><code>AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=
A1X90rT/WK4AOTh/dJsUlOqNDV/nXM6ZU+h+blS9pto=
BEcj10gSGUnJULd08jWfbYaMMrqT2rCnxCVrvJdgdiQ=
BNrK/6GsNTrYT/4qk7pnI6NI/gYV3t+b3KT4bixYMcY=
CVzqFIADD2Ed0khGBNf4Rvh7vSNtrL1ULTkWYQszDpc=
Ck7Z5SGgciwGD7VsPIUOejIinePljhA9DLFCE954L0g=
Cne+0Jngok/d7CEw4ho7iUK+Q729s2LSPbLtqN2PZNs=
Cyw0yR8PhT7zeekbNE+C38VWHqScS6SRCGCMHLts+zM=
C5z1jB+FHB/QgtTITr6NKWpUs9QHwD11CG3v8tmuJ0g=
DFYChJMceD8nNp6ueVUCNEpqGROg7zS7AImn74c9s6s=
DMLG+Ta/ycWQmYTIwA3kCUyXHUBwwhjvHThNTsHLyYo=
DPbZomOIleFrvcJBZPl7y/wEB1w9Q569vAbb6Krl9fE=
DPeFA5/JMSGw+kp2o3bJ2yNq5AUMkiQop+bFP5vc82M=
DVobZ8bWlOv2J6oHO0uITr5FPO5rIY2irdPNhByprHk=
DoVToHyHxlHdyt4Kp//R34xisSULeIKaWNofvVEkEPM=
D2hqhJcmZnBmhw9TodOdoFPAjmRkpRatANCNHxIDHgA=
Eg+MQjy5m+RbI9ASaXvhX2WrdIJ949I1XIwyEQU/gc4=
FATFD8gST26YTWtJ4gJnWS1xoKPw7/nQm8bBtm2aedA=

... output trimmed ...

</code></pre></div><p>To get more information about a particular account, e.g.
<code>+yyK5gqJb7x8xPASJZznZk8X8h0ilXuv39ctFYeHlCg=</code>, run:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>oasis-node stake account info <span class="token punctuation">\</span>
  -a <span class="token variable">$ADDR</span> <span class="token punctuation">\</span>
  --stake.account.id +yyK5gqJb7x8xPASJZznZk8X8h0ilXuv39ctFYeHlCg<span class="token operator">=</span> <span class="token punctuation">\</span>
  <span class="token operator">|</span> python3 -m json.tool
</code></pre></div><p>This will output all staking information about this particular account, e.g.:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;general&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;balance&quot;</span><span class="token operator">:</span> <span class="token string">&quot;601492492765&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;nonce&quot;</span><span class="token operator">:</span> <span class="token number">0</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;escrow&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;active&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;balance&quot;</span><span class="token operator">:</span> <span class="token string">&quot;11242384816640&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;total_shares&quot;</span><span class="token operator">:</span> <span class="token string">&quot;10000000000000&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;debonding&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;balance&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;total_shares&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;commission_schedule&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;rates&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span>
            <span class="token property">&quot;bounds&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;stake_accumulator&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;claims&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token property">&quot;registry.RegisterEntity&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                    <span class="token number">0</span>
                <span class="token punctuation">]</span><span class="token punctuation">,</span>
                <span class="token property">&quot;registry.RegisterNode.GKdkhntFqH5b0mXtRR6Q8nz1vcsFDnLyWWuCtmVhwJs=&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                    <span class="token number">1</span>
                <span class="token punctuation">]</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>We can observe that:</p> <ul><li>Account's general balance (<code>general.balance</code>), the amount of base units that
are available to the account owner, is a little more than 601 tokens.</li> <li>Account's nonce (<code>general.nonce</code>) is the incremental number that must be
unique for each account's transaction. The next transaction should have nonce
equal to <code>0</code>.</li></ul> <p>Each account can also serve as an escrow account.
Escrow accounts are used to keep the funds needed for specific consensus-layer
operations (e.g. registering and running nodes).</p> <p>To simplify accounting, each escrow results in the source account being issued
shares which can be converted back into staking tokens during the reclaim escrow
operation.
Reclaiming escrow does not complete immediately, but may be subject to a
debonding period during which the tokens still remain escrowed.</p> <p>We can observe that:</p> <ul><li>The amount of tokens that are actively bounded to the escrow account (
<code>escrow.active.balance</code>) is a little more than 11242 tokens.</li> <li>The total number of shares for the tokens actively bounded to the escrow
account (<code>escrow.active.total_shares</code>) is 10 trillion.</li> <li>The amount of tokens that are currently debonding (<code>escrow.debonding.balance</code>)
is 0.</li> <li>The total number of shares for the tokens that are currently debonding
(<code>escrow.debonding.total_shares</code>) is 0.</li></ul> <p>An entity can also charge commission for tokens that are delegated to it.
The commission schedule rate steps would be defined in
<code>escrow.commission_schedule.rates</code> and the commission rate bound steps would be
defined in <code>escrow.commission_schedule.bounds</code>.</p> <p>Each escrow account also has a corresponding stake accumulator.
It stores stake claims for an escrow account and ensures all claims are
satisfied at any given point.
Adding a new claim is only possible if all of the existing claims plus the new
claim can be satisfied.</p> <p>We can observe that the stake accumulator currently has two claims:</p> <ul><li>The first one is for registering an entity. The value it maps to is a list of
staking threshold kinds.
<code>0</code> represents the threshold for registering an entity.</li> <li>The second one is for registering a node with ID
<code>GKdkhntFqH5b0mXtRR6Q8nz1vcsFDnLyWWuCtmVhwJs=</code>. The value it maps to is again
a list of staking threshold kinds.
<code>1</code> represents the threshold for registering a validator node.</li></ul> <h2 id="generating-and-submitting-transactions"><a href="#generating-and-submitting-transactions" class="header-anchor">#</a> Generating and submitting transactions</h2> <p>Next, we will learn how to generate and sign transactions offline (i.e. on the
<code>localhost</code>) and then submit them on the online Oasis node (i.e. the <code>server</code>).</p> <h3 id="base-flags"><a href="#base-flags" class="header-anchor">#</a> Base flags</h3> <p>All commands for generating and signing transactions need the following base
flags set:</p> <ul><li><code>--genesis.file</code>: Path to the genesis file on the <code>localhost</code>, e.g.
<code>/localhostdir/genesis.json</code>.</li></ul> <h3 id="signer-flags"><a href="#signer-flags" class="header-anchor">#</a> Signer flags</h3> <p>Currently, we provide two options for signing transactions:</p> <ul><li><p>Ledger device.</p> <p>You will need to set it up as described in our <a href="/hsm/ledger.html">Ledger docs</a> and set the
following flags:</p> <ul><li><p><code>--signer.backend ledger</code>: Specifies use of the Ledger signer.</p></li> <li><p><code>--signer.ledger.address</code>: The <code>Oasis App Address</code> that identifies the
Ledger device you want to use for signing.</p> <div class="custom-block tip"><p class="custom-block-title">NOTE</p> <p>You can omit this flag and <code>oasis-node</code> will try to connect to any available
Ledger device.</p></div></li> <li><p><code>--signer.ledger.index</code>: Address index used to derive address
address on the Ledger device.</p></li> <li><p><code>--signer.dir</code>: Path to entity's artifacts directory on the <code>localhost</code>,
e.g. <code>/localhostdir/entity/</code>.</p></li></ul></li> <li><p>Entity's private key stored in a file.</p> <p>You will need to create your Entity as described in <a href="/operators/running-node-on-amber-network.html#creating-your-entity">Running a Node on the
Amber Network</a> docs and set the following flags:</p> <ul><li><p><code>--signer.backend file</code>: Specifies use of the file signer.</p> <div class="custom-block tip"><p class="custom-block-title">NOTE</p> <p>Currently, <code>file</code> is the default signer so you could also omit this flag.</p></div></li> <li><p><code>--signer.dir</code>: Path to entity's artifacts directory on the <code>localhost</code>,
e.g. <code>/localhostdir/entity/</code>.</p></li></ul></li></ul> <h3 id="storing-base-and-signer-flags-in-an-environment-variable"><a href="#storing-base-and-signer-flags-in-an-environment-variable" class="header-anchor">#</a> Storing Base and Signer flags in an environment variable</h3> <p>To make the transaction commands shorter and avoid typing errors, one can set an
environment variable, e.g. <code>TX_FLAGS</code>, with all the <a href="#base-flags">Base flags</a> and
<a href="#signer-flags">Signer flags</a> configured for his particular set up.</p> <p>For example, one could set <code>TX_FLAGS</code> for a Ledger device like below (replacing
Ledger device address and address index appropriately):</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token assign-left variable">TX_FLAGS</span><span class="token operator">=</span><span class="token string">&quot;--genesis.file /localhostdir/genesis.json \
  --signer.backend ledger \
  --signer.ledger.address oasis19hpt4y2reqwyfqcd53asjchdqf468chr673y6jn07xjp36w32jlscf0me \
  --signer.ledger.index 1 \
  --signer.dir /localhostdir/entity/&quot;</span>
</code></pre></div><p>Or, one could set <code>TX_FLAGS</code> like below to use a file signer:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token assign-left variable">TX_FLAGS</span><span class="token operator">=</span><span class="token string">&quot;--genesis.file /localhostdir/genesis.json \
  --signer.backend file \
  --signer.dir /localhostdir/entity/&quot;</span>
</code></pre></div><h3 id="common-transaction-flags"><a href="#common-transaction-flags" class="header-anchor">#</a> Common transaction flags</h3> <p>When generating a transaction, one needs to set the following transaction flags
as appropriate for a given transaction:</p> <ul><li><p><code>--stake.amount</code>: Amount of base units to transfer, escrow, burn, etc.</p></li> <li><p><code>--transaction.file</code>: Path to the file where to store the generated
transaction.</p></li> <li><p><code>--transaction.nonce</code>: Incremental number that must be unique for each
account's transaction.</p> <p>To get your current account's nonce, see <a href="/operators/maintenance/checking-account-nonce.html">Checking Your Account nonce</a> doc.</p></li> <li><p><code>--transaction.fee.gas</code>: Maximum amount of gas (in <em>gas units</em>) a transaction
can spend.</p> <p>Gas costs for different staking transactions are specified by the
<code>staking.params.gas_costs</code> consensus parameter.</p> <p>To obtain its value from the genesis file, run:
</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">cat</span> /localhostdir/genesis.json <span class="token operator">|</span> <span class="token punctuation">\</span>
  python3 -c <span class="token string">'import sys, json; print(json.dumps(json.load(sys.stdin)[&quot;staking&quot;][&quot;params&quot;][&quot;gas_costs&quot;], indent=4))'</span>
</code></pre></div> <div class="custom-block tip"><p class="custom-block-title">NOTE</p> <p>Currently, gas costs for transactions are set in the genesis file and cannot
be changed. If updating consensus parameters is supported (tracked by
<a href="https://github.com/oasislabs/oasis-core/issues/2334" target="_blank" rel="noopener noreferrer">Oasis Core #2334<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>), this will no longer be the case.</p></div></li> <li><p><code>--transaction.fee.amount</code>: Amount of base units we will pay as a fee for a
transaction.</p></li></ul> <p>Note that specifying a transaction's fee amount (via <code>--transaction.fee.amount</code>)
and maximum gas amount (via <code>--transaction.fee.gas</code>) implicitly defines the
<em>gas price</em> (in base units):</p> <div class="language-text extra-class"><pre class="language-text"><code>gas_price = fee_amount / gas_amount
</code></pre></div><p>Gas price tells how much base units we are willing to pay for one gas unit.</p> <p>Consensus validators can configure their own <em>minimum gas price</em> (via
<code>consensus.tendermint.min_gas_price</code> configuration flag) and will refuse to
process transactions that have their gas price set below their minimum gas
price.</p> <div class="custom-block tip"><p class="custom-block-title">NOTE</p> <p>Currently, there is no mechanism to discover what minimum gas prices are used by
validators.</p> <p>For more details, see <a href="https://github.com/oasislabs/oasis-core/issues/2526" target="_blank" rel="noopener noreferrer">Oasis Core #2526<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p></div> <h2 id="example-transactions"><a href="#example-transactions" class="header-anchor">#</a> Example transactions</h2> <p>Let's assume our entity's account is
<code>+yyK5gqJb7x8xPASJZznZk8X8h0ilXuv39ctFYeHlCg=</code> (the same that we queried for
info in the <a href="#account-info">Account info</a> section) and generate some concrete transactions for
it.</p> <div class="custom-block tip"><p class="custom-block-title">NOTE</p> <p>If you want to follow these examples yourself, make sure you've set the
<code>TX_FLAGS</code> environment variable as described in the <a href="#storing-base-and-signer-flags-in-an-environment-variable">Storing Base and Signer
flags in an environment variable</a> section.</p></div> <h3 id="querying-account-info"><a href="#querying-account-info" class="header-anchor">#</a> Querying account info</h3> <p>To query our entity's account info, use the following command:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>oasis-node stake account info <span class="token punctuation">\</span>
  -a <span class="token variable">$ADDR</span> <span class="token punctuation">\</span>
  --stake.account.id +yyK5gqJb7x8xPASJZznZk8X8h0ilXuv39ctFYeHlCg<span class="token operator">=</span> <span class="token punctuation">\</span>
  <span class="token operator">|</span> python3 -m json.tool
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">NOTE</p> <p>For a detailed explanation on querying account information, see <a href="#account-info">Account info</a>
section.</p></div> <p>At the beginning, this outputs:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;general&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;balance&quot;</span><span class="token operator">:</span> <span class="token string">&quot;601492492765&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;nonce&quot;</span><span class="token operator">:</span> <span class="token number">0</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;escrow&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;active&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;balance&quot;</span><span class="token operator">:</span> <span class="token string">&quot;11242384816640&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;total_shares&quot;</span><span class="token operator">:</span> <span class="token string">&quot;10000000000000&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;debonding&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;balance&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;total_shares&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        ...
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>We can observe that:</p> <ul><li>Account's general balance is a little more than 601 tokens.</li> <li>Account's nonce is <code>0</code>.</li> <li>A little more than 11242 tokens are actively bounded to the escrow account.</li> <li>The amount of tokens that are currently debonding is 0.</li></ul> <h3 id="obtaining-transactions-gas-costs"><a href="#obtaining-transactions-gas-costs" class="header-anchor">#</a> Obtaining transactions' gas costs</h3> <p>As explained in the <a href="#common-transaction-flags">Common transaction flags</a> section, we can obtain gas costs
for different staking transactions from the genesis file by running:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">cat</span> /localhostdir/genesis.json <span class="token operator">|</span> <span class="token punctuation">\</span>
  python3 -c <span class="token string">'import sys, json; print(json.dumps(json.load(sys.stdin)[&quot;staking&quot;][&quot;params&quot;][&quot;gas_costs&quot;], indent=4))'</span>
</code></pre></div> <p>For our network, this returns:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;add_escrow&quot;</span><span class="token operator">:</span> <span class="token number">1000</span><span class="token punctuation">,</span>
    <span class="token property">&quot;burn&quot;</span><span class="token operator">:</span> <span class="token number">1000</span><span class="token punctuation">,</span>
    <span class="token property">&quot;reclaim_escrow&quot;</span><span class="token operator">:</span> <span class="token number">1000</span><span class="token punctuation">,</span>
    <span class="token property">&quot;transfer&quot;</span><span class="token operator">:</span> <span class="token number">1000</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Hence, we will need to set the <code>--transaction.fee.gas</code> flag, i.e. the maximum
amount of gas a transaction can spend, in the following transactions to at least
1000 <em>gas units</em>.</p> <h3 id="burning-tokens"><a href="#burning-tokens" class="header-anchor">#</a> Burning tokens</h3> <p>Let's start with a <em>burn</em> transaction which destroys the given number of tokens.</p> <p>To generate a burn transaction of 123 tokens (i.e. 123 * 10^9 base units)
and sign it, run:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>oasis-node stake account gen_burn <span class="token punctuation">\</span>
  <span class="token variable">$TX_FLAGS</span> <span class="token punctuation">\</span>
  --stake.amount <span class="token number">123000000000</span> <span class="token punctuation">\</span>
  --transaction.file tx_burn.json <span class="token punctuation">\</span>
  --transaction.nonce <span class="token number">0</span> <span class="token punctuation">\</span>
  --transaction.fee.gas <span class="token number">1000</span> <span class="token punctuation">\</span>
  --transaction.fee.amount <span class="token number">2000</span>
</code></pre></div><p>To submit the generated transaction, we need to copy <code>tx_burn.json</code> to the
online Oasis node (i.e. the <code>server</code>) and submit it from there:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>oasis-node consensus submit_tx <span class="token punctuation">\</span>
  -a <span class="token variable">$ADDR</span> <span class="token punctuation">\</span>
  --transaction.file tx_burn.json
</code></pre></div><p>Let's <a href="#querying-account-info">check our account's info</a> again:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;general&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;balance&quot;</span><span class="token operator">:</span> <span class="token string">&quot;478492490765&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;nonce&quot;</span><span class="token operator">:</span> <span class="token number">1</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;escrow&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;active&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;balance&quot;</span><span class="token operator">:</span> <span class="token string">&quot;11242384816640&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;total_shares&quot;</span><span class="token operator">:</span> <span class="token string">&quot;10000000000000&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;debonding&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;balance&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;total_shares&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        ...
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>We can observe that:</p> <ul><li>Our account's general balance has decreased for 123 tokens and 2000 base
units. The latter corresponds to the fee that we specified we will pay for
this transaction.</li> <li>Our account's nonce increased to <code>1</code>.</li></ul> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>Usually, the new balance is seen immediately, but some transactions (for example
escrow reclaiming) do not take effect until after a debonding period has elapsed,
so you might need to wait a few blocks for the balances to update.</p></div> <h3 id="transferring-tokens"><a href="#transferring-tokens" class="header-anchor">#</a> Transferring tokens</h3> <p>Token transfer transactions transfer tokens from the signer's account to the
given destination account.</p> <p>Let's choose a destination account, e.g.
<code>A1X90rT/WK4AOTh/dJsUlOqNDV/nXM6ZU+h+blS9pto=</code>, and <a href="#querying-account-info">check its current balance</a> (replacing our entity's ID with the destination
account's ID):</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;general&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;balance&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;nonce&quot;</span><span class="token operator">:</span> <span class="token number">1030</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;escrow&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;active&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;balance&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;total_shares&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;debonding&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;balance&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;total_shares&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        ...
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>We can observe that the chosen destination account currently has general balance
of 0 tokens.</p> <p>Let's generate a transfer transaction of 170 tokens, (i.e. 170 * 10^9 base
units), from our account to the chosen destination account:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>oasis-node stake account gen_transfer <span class="token punctuation">\</span>
  <span class="token variable">$TX_FLAGS</span> <span class="token punctuation">\</span>
  --stake.amount <span class="token number">170000000000</span> <span class="token punctuation">\</span>
  --stake.transfer.destination A1X90rT/WK4AOTh/dJsUlOqNDV/nXM6ZU+h+blS9pto<span class="token operator">=</span> <span class="token punctuation">\</span>
  --transaction.file tx_transfer.json <span class="token punctuation">\</span>
  --transaction.nonce <span class="token number">1</span> <span class="token punctuation">\</span>
  --transaction.fee.gas <span class="token number">1000</span> <span class="token punctuation">\</span>
  --transaction.fee.amount <span class="token number">2000</span>
</code></pre></div><p>To submit the generated transaction, we need to copy <code>tx_transfer.json</code> to the
online Oasis node (i.e. the <code>server</code>) and submit it from there:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>oasis-node consensus submit_tx <span class="token punctuation">\</span>
  -a <span class="token variable">$ADDR</span> <span class="token punctuation">\</span>
  --transaction.file tx_transfer.json
</code></pre></div><p>Let's <a href="#querying-account-info">check both accounts' info</a> (first ours and then
the destination's):</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;general&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;balance&quot;</span><span class="token operator">:</span> <span class="token string">&quot;308492488765&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;nonce&quot;</span><span class="token operator">:</span> <span class="token number">2</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;escrow&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;active&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;balance&quot;</span><span class="token operator">:</span> <span class="token string">&quot;11242384816640&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;total_shares&quot;</span><span class="token operator">:</span> <span class="token string">&quot;10000000000000&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;debonding&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;balance&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;total_shares&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        ...
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;general&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;balance&quot;</span><span class="token operator">:</span> <span class="token string">&quot;170000000000&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;nonce&quot;</span><span class="token operator">:</span> <span class="token number">1030</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;escrow&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;active&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;balance&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;total_shares&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;debonding&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;balance&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;total_shares&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        ...
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>We can observe that:</p> <ul><li>Our general balance decreased for 170 tokens and 2000 base units. The latter
corresponds to the fee that we specified we will pay for this transaction.</li> <li>Our account's nonce increased to <code>2</code>.</li> <li>Destination account's general balance increased for 170 tokens.</li></ul> <h3 id="escrowing-tokens"><a href="#escrowing-tokens" class="header-anchor">#</a> Escrowing tokens</h3> <p>In this example we will put 208 tokens (i.e. 208 * 10^9 base units) to our own
escrow account.</p> <p>First, let's generate an escrow transaction and store it to <code>tx_escrow.json</code>:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>oasis-node stake account gen_escrow <span class="token punctuation">\</span>
  <span class="token variable">$TX_FLAGS</span> <span class="token punctuation">\</span>
  --stake.amount <span class="token number">208000000000</span> <span class="token punctuation">\</span>
  --stake.escrow.account +yyK5gqJb7x8xPASJZznZk8X8h0ilXuv39ctFYeHlCg<span class="token operator">=</span> <span class="token punctuation">\</span>
  --transaction.file tx_escrow.json <span class="token punctuation">\</span>
  --transaction.nonce <span class="token number">2</span> <span class="token punctuation">\</span>
  --transaction.fee.gas <span class="token number">1000</span> <span class="token punctuation">\</span>
  --transaction.fee.amount <span class="token number">2000</span>
</code></pre></div><p>To submit the generated transaction, we need to copy <code>tx_escrow.json</code> to the
online Oasis node (i.e. the <code>server</code>) and submit it from there:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>oasis-node consensus submit_tx <span class="token punctuation">\</span>
  -a <span class="token variable">$ADDR</span> <span class="token punctuation">\</span>
  --transaction.file tx_escrow.json
</code></pre></div><p>Let's <a href="#querying-account-info">check our account's info</a>:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;general&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;balance&quot;</span><span class="token operator">:</span> <span class="token string">&quot;100492486765&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;nonce&quot;</span><span class="token operator">:</span> <span class="token number">3</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;escrow&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;active&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;balance&quot;</span><span class="token operator">:</span> <span class="token string">&quot;11450384816640&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;total_shares&quot;</span><span class="token operator">:</span> <span class="token string">&quot;10185014125910&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;debonding&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;balance&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;total_shares&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        ...
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>We can observe that:</p> <ul><li>Our general balance decreased for 208 tokens and 2000 base units. The latter
corresponds to the fee that we specified we will pay for this transaction.</li> <li>Our account's nonce increased to <code>3</code>.</li> <li>Our escrow account's active balance increased for 208 tokens.</li> <li>The total number of shares in our escrow account's active balance
increased from 10000000000000 to 10185014125910.</li></ul> <p>When a delegator delegates some amount of tokens to an entity's account,
the delegator receives the number of shares proportional to the current
<em>share price</em> (in base units) calculated from the total number of base units
delegated to an entity's account so far and the number of shares issued so far:</p> <div class="language-text extra-class"><pre class="language-text"><code>shares_per_base_unit = entity_issued_shares / entity_delegated_base_units
</code></pre></div><p>In our case, the current share price (i.e. <code>shares_per_base_unit</code>) is
10000000000000 / 11242384816640 which is 0.8894909899542729.</p> <p>For 208 tokens, the amount of newly issued shares is thus 208 * 10^9 *
0.8894909899542729 which is 185014125910.48877 (rounded to 185014125910).</p> <h3 id="reclaiming-escrowed-tokens"><a href="#reclaiming-escrowed-tokens" class="header-anchor">#</a> Reclaiming escrowed tokens</h3> <p>When we want to reclaim escrowed tokens, we can't do that directly. Instead, we
need to specify the number of shares we want to reclaim from an escrow account.</p> <p>For example, to reclaim 357 billion shares from an escrow account, we need to
generate the following reclaim escrow transaction:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>oasis-node stake account gen_reclaim_escrow <span class="token punctuation">\</span>
  <span class="token variable">$TX_FLAGS</span> <span class="token punctuation">\</span>
  --stake.shares <span class="token number">357000000000</span> <span class="token punctuation">\</span>
  --stake.escrow.account +yyK5gqJb7x8xPASJZznZk8X8h0ilXuv39ctFYeHlCg<span class="token operator">=</span> <span class="token punctuation">\</span>
  --transaction.file tx_reclaim.json <span class="token punctuation">\</span>
  --transaction.nonce <span class="token number">3</span> <span class="token punctuation">\</span>
  --transaction.fee.gas <span class="token number">1000</span> <span class="token punctuation">\</span>
  --transaction.fee.amount <span class="token number">2000</span>
</code></pre></div><p>To submit the generated transaction, we need to copy <code>tx_reclaim.json</code> to the
online Oasis node (i.e. the <code>server</code>) and submit it from there:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>oasis-node consensus submit_tx <span class="token punctuation">\</span>
  -a <span class="token variable">$ADDR</span> <span class="token punctuation">\</span>
  --transaction.file tx_reclaim.json
</code></pre></div><p>Let's <a href="#querying-account-info">check our account's info</a>:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;general&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;balance&quot;</span><span class="token operator">:</span> <span class="token string">&quot;100492484765&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;nonce&quot;</span><span class="token operator">:</span> <span class="token number">4</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;escrow&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;active&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;balance&quot;</span><span class="token operator">:</span> <span class="token string">&quot;11049031678686&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;total_shares&quot;</span><span class="token operator">:</span> <span class="token string">&quot;9828014125910&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;debonding&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;balance&quot;</span><span class="token operator">:</span> <span class="token string">&quot;401353137954&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;total_shares&quot;</span><span class="token operator">:</span> <span class="token string">&quot;401353137954&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        ...
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>We can observe that:</p> <ul><li>Our general balance decreased for 2000 base units. This corresponds to the fee
that we specified we will pay for this transaction.</li> <li>Our account's nonce increased to <code>4</code>.</li> <li>Our escrow account's active number of shares decreased for 357 billion shares
to 9828014125910.</li> <li>Our escrow account's active balance decreased for 401353137954 base units and
is now 11049031678686 base units.</li> <li>Our escrow account's debonding balance increased to 401353137954 base units
and its number of shares to the same amount.</li></ul> <p>When a delegator wants to reclaim a certain number of escrowed tokens, the
<em>base unit price</em> (in shares) must be calculated based on the entity's escrow
account's current active balance and the number of issued shares:</p> <div class="language-text extra-class"><pre class="language-text"><code>base_units_per_share = entity_delegated_base_units / entity_issued_shares
</code></pre></div><p>In our case, the current base unit price (i.e. <code>base_units_per_share</code>) is
11450384816640 / 10185014125910 which is 1.124238481664054 base unit per share.</p> <p>For 357 billion shares, the amount of base units that will be reclaimed is thus
357 * 10^9 * 1.124238481664054 which is 401353137954.06726 (rounded to
401353137954).</p> <p>Hence, the escrow account's active balance decreased for 401353137954 base units
and the debonding balance increased for the same amount.</p> <div class="custom-block warning"><p class="custom-block-title">NOTE</p> <p>While the number of debonding shares currently equals the number of base units
that are currently subject to debonding and hence, the amount of tokens we can
except to reclaim after debonding period is over is a little over 401 tokens,
there is no guarantee that this stays the same until the end of the debonding
period since any slashing could change shares' price.</p></div> <p>The debonding period is specified by the <code>staking.params.debonding_interval</code>
consensus parameter and is represented as a number of epochs that need to pass.</p> <p>To obtain its value from the genesis file, run:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">cat</span> /localhostdir/genesis.json <span class="token operator">|</span> <span class="token punctuation">\</span>
  python3 -c <span class="token string">'import sys, json; print(json.load(sys.stdin)[&quot;staking&quot;][&quot;params&quot;][&quot;debonding_interval&quot;])'</span>
</code></pre></div> <p>For our example network, this returns:</p> <div class="language-text extra-class"><pre class="language-text"><code>10
</code></pre></div><p>After the debonding period has passed, the network will automatically move our
escrow account's active debonding balance into our escrow account's active
balance.</p> <h3 id="amending-a-commission-schedule"><a href="#amending-a-commission-schedule" class="header-anchor">#</a> Amending a commission schedule</h3> <p>We can configure our account to take a commission on staking rewards given to
our node(s).
The commission rate must be within bounds, which we can also configure.</p> <p>Let's generate a transaction to:</p> <ul><li>tell everyone that our bounds allow us to set any rate (0% - 100%), and</li> <li>we'll take 50%.</li></ul> <p>We're not allowed to change the commission bounds too close in near future, so
we'd have to make changes a number of epochs in the future.</p> <p>In the example, we're setting the bounds to start on epoch 16.
An account's default bounds are 0% maximum, so we have to wait until our new
bounds go into effect to raise our rate to 50%.
Because of that, we'll specify that our rate also starts on epoch 16.</p> <div class="language-bash extra-class"><pre class="language-bash"><code>oasis-node stake account gen_amend_commission_schedule <span class="token punctuation">\</span>
  <span class="token variable">$TX_FLAGS</span> <span class="token punctuation">\</span>
  --stake.commission_schedule.bounds <span class="token number">16</span>/0/100000 <span class="token punctuation">\</span>
  --stake.commission_schedule.rates <span class="token number">16</span>/50000 <span class="token punctuation">\</span>
  --transaction.file tx_amend_commission_schedule.json <span class="token punctuation">\</span>
  --transaction.nonce <span class="token number">4</span> <span class="token punctuation">\</span>
  --transaction.fee.gas <span class="token number">1000</span> <span class="token punctuation">\</span>
  --transaction.fee.amount <span class="token number">2000</span>
</code></pre></div><p>Rates and minimum/maximum rates are in units of 1/100,000, so <code>0</code>, <code>50000</code>, and
<code>100000</code> come out to 0%, 50%, and 100%, respectively.</p> <p>To submit the generated transaction, we need to copy
<code>tx_amend_commission_schedule.json</code> to the online Oasis node (i.e. the <code>server</code>)
and submit it from there:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>oasis-node consensus submit_tx <span class="token punctuation">\</span>
  -a <span class="token variable">$ADDR</span> <span class="token punctuation">\</span>
  --transaction.file tx_amend_commission_schedule.json
</code></pre></div><p>After that, we can <a href="#querying-account-info">check our account's info</a>, and we should see something like
this:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;general&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        ...
        <span class="token property">&quot;nonce&quot;</span><span class="token operator">:</span> <span class="token number">5</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;escrow&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        ...
        <span class="token property">&quot;commission_schedule&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;rates&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token property">&quot;start&quot;</span><span class="token operator">:</span> <span class="token number">16</span><span class="token punctuation">,</span>
                <span class="token property">&quot;rate&quot;</span><span class="token operator">:</span> <span class="token string">&quot;50000&quot;</span><span class="token punctuation">,</span>
            <span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token property">&quot;bounds&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token property">&quot;start&quot;</span><span class="token operator">:</span> <span class="token number">16</span><span class="token punctuation">,</span>
                <span class="token property">&quot;rate_min&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;rate_max&quot;</span><span class="token operator">:</span> <span class="token string">&quot;100000&quot;</span>
            <span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Node operators collect commissions when their node earns a staking reward for
delegators.
A validator node earns a staking reward for participating in the consensus
protocol each epoch.
The commission rate is a fraction of the staking reward.</p> <p>For example, if our node earns a reward of 0.007 tokens, 0.0035 tokens are added
to the escrow pool (increasing the value of our escrow pool shares uniformly),
and 0.0035 tokens are given to us (issuing us new shares as if we manually
deposited them).</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>To troubleshoot an amendment that's rejected, consult our <a href="https://github.com/oasislabs/oasis-core/blob/0dee03d75b3e8cfb36293fbf8ecaaec6f45dd3a5/go/staking/api/commission_test.go#L61-L610" target="_blank" rel="noopener noreferrer">compendium of 23
common ways for a commission schedule amendment to fail<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/oasislabs/docs/edit/master/src/src/operators/stake-management.md" target="_blank" rel="noopener noreferrer">Help us improve this page!</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      
      <a href="/operators/current-testnet-parameters.html" class="prev">
        Current Testnet Parameters
      </a></span> <span class="next"><a href="/operators/sentry-node.html">
        Sentry Node Architecture
      </a>
      
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.4a6e40e5.js" defer></script><script src="/assets/js/2.5ac98bd6.js" defer></script><script src="/assets/js/35.c0f9d01c.js" defer></script>
  </body>
</html>
